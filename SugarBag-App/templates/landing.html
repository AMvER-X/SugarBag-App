<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Sugar Bag Road Mountain Bike Trails | Login</title>
    <!-- MDB icon -->
    <link rel="icon" href="../../static/img/slogo.png" type="image/x-icon" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" />
    <!-- MDB -->
    <link rel="stylesheet" href="../../static/css/mdb.min.css" />
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css" rel="stylesheet">
   
   
    <style>
      #map {
        height: 100%;
        width: 100%;
        min-height: 100vh;
      }
      .login-column {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        background-color: #f5f5f5;
      }
      @media (max-width: 768px) {
        .map-column, .login-column {
          min-height: 50vh;
        }
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <!-- Map Column -->
        <div class="col-lg-6 col-md-6 col-12 map-column">
          <div id="map"></div>
        </div>

        <!-- Login Column -->
        <div class="col-lg-6 col-md-6 col-12 login-column">
          <div class="text-center">
            <img class="mb-4" src="../../static/img/slogo.png" style="width: 100px; height: 100px;" alt="Logo" />
            <form method="POST" action="{{ url_for('home') }}">
              {{ form.hidden_tag() }}
              <!-- Email input -->
              <div data-mdb-input-init class="form-outline mb-4">
                {{ form.email(class="form-control") }}
                {{ form.email.label(class="form-label") }}
              </div>
              <!-- Password input -->
              <div data-mdb-input-init class="form-outline mb-4">
                {{ form.password(class="form-control") }}
                {{ form.password.label(class="form-label") }}
              </div>
              <!-- Forgot password link -->
              <div class="row mb-4">
                <div class="col">
                  <a href="{{ url_for('forgot_password') }}">Forgot password?</a>
                </div>
              </div>
              <!-- Submit button -->
              {{ form.submit(class="btn btn-primary btn-block mb-4") }}
              <!-- Register and social links -->
              <div class="text-center">
                <p>Not a member? <a href="{{ url_for('signup') }}">Register</a></p>
                <p>or sign up with:</p>
                <button type="button" class="btn btn-link btn-floating mx-1"><i class="fab fa-facebook-f"></i></button>
                <button type="button" class="btn btn-link btn-floating mx-1"><i class="fab fa-google"></i></button>
                <button type="button" class="btn btn-link btn-floating mx-1"><i class="fab fa-twitter"></i></button>
                <button type="button" class="btn btn-link btn-floating mx-1"><i class="fab fa-github"></i></button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- MDB and Mapbox JS -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>
    <script type="text/javascript" src="../../static/js/mdb.umd.min.js"></script>
    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoiZnJ1Y3RveCIsImEiOiJja2swNnIydzcwZW1mMm5tZmV4Zm44cjVuIn0.AnaNJVv0-oE25uP2-n82QQ';
      var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/light-v11',
        center: [153.1159656, -26.7899778],
        zoom: 15
      });

      map.on('load', function () {
        map.addSource('trails', {
          'type': 'geojson',
          'data': '/static/trails.geojson' // Adjust path as per your file location
        });
        map.addLayer({
          'id': 'trailsLayer',
          'type': 'line',
          'source': 'trails',
          'layout': {
            'line-join': 'round',
            'line-cap': 'round'
          },
          'paint': {
            'line-color': ['get', 'color'], // Assumes trails data includes 'color' property
            'line-width': 3
          }
        });
        // Add popup for trail info on click
        map.on('click', 'trailsLayer', function (e) {
            var trailName = e.features[0].properties.name;
            var difficulty = e.features[0].properties.difficulty;
            new mapboxgl.Popup()
                .setLngLat(e.lngLat)
                .setHTML('<strong>' + trailName + '</strong><br>Difficulty: ' + difficulty)
                .addTo(map);
        });

        // Change the cursor when hovering over trails
        map.on('mouseenter', 'trailsLayer', function () {
            map.getCanvas().style.cursor = 'pointer';
        });
        map.on('mouseleave', 'trailsLayer', function () {
            map.getCanvas().style.cursor = '';
        });
      });
    </script>
  </body>
</html>